@using Epam.FinalTask.BLL.Interfaces;
@using Epam.FinalTask.Ioc;
@using Epam.FinalTask.Entities;
@{
    Layout = null;

    if (!int.TryParse(Request["fromUserID"], out var fromUser)) {
        Response.StatusCode = 404;
        return;
    }

    if (!int.TryParse(Request["toUserID"], out var toUser)) {
        Response.StatusCode = 404;
        return;
    }

    IChannelBL channelBL = DependencyResolver.ChannelBL;
    Channel channel = channelBL.CreateDirectedChannel("Личные сообщения", fromUser, toUser);
    Response.Write(channel.ID);
}


